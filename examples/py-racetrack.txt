/*
	In this example we drive a vortex wall in Permalloy by spin-transfer torque.
	We set up a post-step function that makes the simulation box "follow" the domain
	wall. By removing surface charges at the left and right ends, we mimic an infintely
	long wire.
*/

// Geometry
	setgridsize(256, 64, 1)
	setcellsize(3e-9, 3e-9, 30e-9)

// Material
	Msat    = 860e3
	Aex     = 13e-12
	Xi      = 0.1
	SpinPol = 0.56

// Initial magnetization close to vortex wall
	m = vortexwall(1, -1, 1, 1)

// Remove surface charges from left (mx=1) and right (mx=-1) sides to mimic infinitely long wire.
	RemoveLRSurfaceCharge(1, -1)

// Set post-step function that centers simulation window on domain wall.
	PostStep(centerInplaneWall)

// Relax
	Alpha = 3    // high damping for fast relax
	Run(1e-9)    // relax
	Alpha = 0.02 // restore normal damping

// Schedule output
	Autosave(m, 100e-12)
	savetable(10e-12)

// Run the simulation with current through the sample
	J = vector(-8e12, 0, 0)
	Run(1e-9)
